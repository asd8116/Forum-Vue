{"version":3,"sources":["webpack:///./src/views/admin/AdminCategories.vue?588a","webpack:///./src/views/admin/AdminCategories.vue?032d","webpack:///src/views/admin/AdminCategories.vue","webpack:///./src/views/admin/AdminCategories.vue?e929","webpack:///./src/views/admin/AdminCategories.vue?f5a2","webpack:///./src/components/admin/AdminNav.vue?6f26","webpack:///./src/components/admin/AdminNav.vue","webpack:///./src/apis/admin.js"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_AdminCategories_vue_vue_type_style_index_0_id_3ac60adf_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_AdminCategories_vue_vue_type_style_index_0_id_3ac60adf_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","staticClass","directives","name","rawName","value","expression","attrs","type","placeholder","domProps","on","input","$event","target","composing","newCategoryName","disabled","isProcessing","click","stopPropagation","preventDefault","createCategory","_v","scope","width","_l","category","key","id","_s","isEditing","$set","handleCancel","toggleIsEditing","updateCategory","categoryId","deleteCategory","staticRenderFns","AdminCategoriesvue_type_script_lang_js_","data","categories","isLoading","created","fetchCategories","methods","_fetchCategories","Object","asyncToGenerator","regeneratorRuntime","mark","_callee","_ref","statusText","wrap","_context","prev","next","admin","get","sent","Error","map","_objectSpread","t0","helpers","fire","title","stop","apply","arguments","_createCategory","_callee2","_ref2","_context2","create","status","push","_updateCategory","_callee3","_ref3","_ref4","_context3","update","_x","_deleteCategory","_callee4","_ref5","_context4","delete","filter","_x2","nameCached","components","AdminNav","Spinner","admin_AdminCategoriesvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__","to","script","restaurants","apiHelper","formData","post","restaurantId","concat","getDetail","put","_ref6","_ref7","users","_ref8","userId","isAdmin"],"mappings":"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","file":"js/chunk-31860f55.3b1a5b7b.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminCategories.vue?vue&type=style&index=0&id=3ac60adf&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminCategories.vue?vue&type=style&index=0&id=3ac60adf&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container py-5\"},[_c('AdminNav'),_c('form',{staticClass:\"my-4\"},[_c('div',{staticClass:\"form-row\"},[_c('div',{staticClass:\"col-auto\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newCategoryName),expression:\"newCategoryName\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"placeholder\":\"新增餐廳類別...\"},domProps:{\"value\":(_vm.newCategoryName)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.newCategoryName=$event.target.value}}})]),_c('div',{staticClass:\"col-auto\"},[_c('button',{staticClass:\"btn btn-primary\",attrs:{\"type\":\"button\",\"disabled\":_vm.isProcessing},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.createCategory($event)}}},[_vm._v(\"新增\")])])])]),(_vm.isLoading)?_c('Spinner'):_c('table',{staticClass:\"table\"},[_c('thead',{staticClass:\"thead-dark\"},[_c('tr',[_c('th',{attrs:{\"scope\":\"col\",\"width\":\"60\"}},[_vm._v(\"#\")]),_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"Category Name\")]),_c('th',{attrs:{\"scope\":\"col\",\"width\":\"210\"}},[_vm._v(\"Action\")])])]),_c('tbody',_vm._l((_vm.categories),function(category){return _c('tr',{key:category.id},[_c('th',{attrs:{\"scope\":\"row\"}},[_vm._v(_vm._s(category.id))]),_c('td',{staticClass:\"position-relative\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!category.isEditing),expression:\"!category.isEditing\"}],staticClass:\"category-name\"},[_vm._v(_vm._s(category.name))]),_c('input',{directives:[{name:\"show\",rawName:\"v-show\",value:(category.isEditing),expression:\"category.isEditing\"},{name:\"model\",rawName:\"v-model\",value:(category.name),expression:\"category.name\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\"},domProps:{\"value\":(category.name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(category, \"name\", $event.target.value)}}}),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(category.isEditing),expression:\"category.isEditing\"}],staticClass:\"cancel\",on:{\"click\":function($event){return _vm.handleCancel(category.id)}}},[_vm._v(\"✕\")])]),_c('td',{staticClass:\"d-flex justify-content-between\"},[_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(!category.isEditing),expression:\"!category.isEditing\"}],staticClass:\"btn btn-link mr-2\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.toggleIsEditing(category.id)}}},[_vm._v(\"Edit\")]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(category.isEditing),expression:\"category.isEditing\"}],staticClass:\"btn btn-link mr-2\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.updateCategory({ categoryId: category.id, name: category.name })}}},[_vm._v(\"Save\")]),_c('button',{staticClass:\"btn btn-link mr-2\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.deleteCategory(category.id)}}},[_vm._v(\"Delete\")])])])}),0)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"container py-5\">\r\n    <AdminNav />\r\n\r\n    <form class=\"my-4\">\r\n      <div class=\"form-row\">\r\n        <div class=\"col-auto\">\r\n          <input v-model=\"newCategoryName\" type=\"text\" class=\"form-control\" placeholder=\"新增餐廳類別...\" />\r\n        </div>\r\n\r\n        <div class=\"col-auto\">\r\n          <button type=\"button\" class=\"btn btn-primary\" :disabled=\"isProcessing\" @click.stop.prevent=\"createCategory\">新增</button>\r\n        </div>\r\n      </div>\r\n    </form>\r\n\r\n    <Spinner v-if=\"isLoading\" />\r\n    <table v-else class=\"table\">\r\n      <thead class=\"thead-dark\">\r\n        <tr>\r\n          <th scope=\"col\" width=\"60\">#</th>\r\n          <th scope=\"col\">Category Name</th>\r\n          <th scope=\"col\" width=\"210\">Action</th>\r\n        </tr>\r\n      </thead>\r\n\r\n      <tbody>\r\n        <tr v-for=\"category in categories\" :key=\"category.id\">\r\n          <th scope=\"row\">{{ category.id }}</th>\r\n\r\n          <td class=\"position-relative\">\r\n            <div v-show=\"!category.isEditing\" class=\"category-name\">{{ category.name }}</div>\r\n\r\n            <input v-show=\"category.isEditing\" v-model=\"category.name\" type=\"text\" class=\"form-control\" />\r\n            <span v-show=\"category.isEditing\" class=\"cancel\" @click=\"handleCancel(category.id)\">✕</span>\r\n          </td>\r\n\r\n          <td class=\"d-flex justify-content-between\">\r\n            <button\r\n              v-show=\"!category.isEditing\"\r\n              type=\"button\"\r\n              class=\"btn btn-link mr-2\"\r\n              @click.stop.prevent=\"toggleIsEditing(category.id)\"\r\n            >Edit</button>\r\n\r\n            <button\r\n              v-show=\"category.isEditing\"\r\n              type=\"button\"\r\n              class=\"btn btn-link mr-2\"\r\n              @click.stop.prevent=\"updateCategory({ categoryId: category.id, name: category.name })\"\r\n            >Save</button>\r\n\r\n            <button type=\"button\" class=\"btn btn-link mr-2\" @click.stop.prevent=\"deleteCategory(category.id)\">Delete</button>\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport AdminNav from '@/components/admin/AdminNav'\r\nimport Spinner from '@/components/Spinner'\r\n\r\nimport adminAPI from '@/apis/admin'\r\nimport { Toast } from '@/utils/helpers'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      newCategoryName: '',\r\n      categories: [],\r\n      isProcessing: false,\r\n      isLoading: true\r\n    }\r\n  },\r\n  created() {\r\n    this.fetchCategories()\r\n  },\r\n  methods: {\r\n    async fetchCategories() {\r\n      try {\r\n        const { data, statusText } = await adminAPI.categories.get()\r\n\r\n        if (statusText !== 'OK') {\r\n          throw new Error(statusText)\r\n        }\r\n\r\n        // 在每一個 category 中都添加一個 isEditing 屬性\r\n        this.categories = data.categories.map(category => ({\r\n          ...category,\r\n          isEditing: false\r\n        }))\r\n        this.isLoading = false\r\n      } catch (error) {\r\n        this.isLoading = false\r\n        Toast.fire({\r\n          type: 'error',\r\n          title: '無法取得餐廳類別，請稍後再試'\r\n        })\r\n      }\r\n    },\r\n    async createCategory() {\r\n      try {\r\n        this.isProcessing = true\r\n        const { data, statusText } = await adminAPI.categories.create({\r\n          name: this.newCategoryName\r\n        })\r\n\r\n        if (statusText !== 'OK' || data.status !== 'success') {\r\n          throw new Error(statusText)\r\n        }\r\n\r\n        this.categories.push({\r\n          ...data.category,\r\n          isEditing: false\r\n        })\r\n        this.isProcessing = false\r\n        this.newCategoryName = '' // 清空原本欄位中的內容\r\n      } catch (error) {\r\n        this.isProcessing = false\r\n        Toast.fire({\r\n          type: 'error',\r\n          title: '無法新增餐廳類別，請稍後再試'\r\n        })\r\n      }\r\n    },\r\n    async updateCategory({ categoryId, name }) {\r\n      try {\r\n        const { data, statusText } = await adminAPI.categories.update({\r\n          categoryId,\r\n          name\r\n        })\r\n\r\n        if (statusText !== 'OK' || data.status !== 'success') {\r\n          throw new Error(statusText)\r\n        }\r\n\r\n        this.toggleIsEditing(categoryId)\r\n      } catch (error) {\r\n        Toast.fire({\r\n          type: 'error',\r\n          title: '無法更新餐廳類別，請稍後再試'\r\n        })\r\n      }\r\n    },\r\n    async deleteCategory(categoryId) {\r\n      try {\r\n        const { data, statusText } = await adminAPI.categories.delete({\r\n          categoryId\r\n        })\r\n\r\n        if (statusText !== 'OK' || data.status !== 'success') {\r\n          throw new Error(statusText)\r\n        }\r\n        // 將該餐廳類別從陣列中移除\r\n        this.categories = this.categories.filter(category => category.id !== categoryId)\r\n      } catch (error) {\r\n        Toast.fire({\r\n          type: 'error',\r\n          title: '無法刪除該餐廳類別，請稍後再試'\r\n        })\r\n      }\r\n    },\r\n    toggleIsEditing(categoryId) {\r\n      this.categories = this.categories.map(category => {\r\n        if (category.id !== categoryId) return category\r\n        // 如果迴圈中的 category.id 是欲修改的 categoryId 則改變 isEditing 的值\r\n        return {\r\n          ...category,\r\n          nameCached: category.name,\r\n          isEditing: !category.isEditing\r\n        }\r\n      })\r\n    },\r\n    handleCancel(categoryId) {\r\n      this.categories = this.categories.map(category => {\r\n        if (category.id !== categoryId) {\r\n          return category\r\n        }\r\n        // 將原本的類別名稱還回去\r\n        return {\r\n          ...category,\r\n          name: category.nameCached\r\n        }\r\n      })\r\n      this.toggleIsEditing(categoryId)\r\n    }\r\n  },\r\n  components: {\r\n    AdminNav,\r\n    Spinner\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.category-name {\r\n  padding: 0.375rem 0.75rem;\r\n  border: 1px solid transparent;\r\n  outline: 0;\r\n  cursor: auto;\r\n}\r\n.btn-link {\r\n  width: 62px;\r\n}\r\n.cancel {\r\n  position: absolute;\r\n  right: 20px;\r\n  top: 50%;\r\n  transform: translateY(-50%);\r\n  display: inline-flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  width: 25px;\r\n  height: 25px;\r\n  border: 1px solid #aaaaaa;\r\n  border-radius: 50%;\r\n  user-select: none;\r\n  cursor: pointer;\r\n  font-size: 12px;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminCategories.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminCategories.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AdminCategories.vue?vue&type=template&id=3ac60adf&scoped=true&\"\nimport script from \"./AdminCategories.vue?vue&type=script&lang=js&\"\nexport * from \"./AdminCategories.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AdminCategories.vue?vue&type=style&index=0&id=3ac60adf&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3ac60adf\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"mb-3\"},[_c('h1',[_vm._v(\"餐廳後台\")]),_c('router-link',{attrs:{\"to\":\"/admin/restaurants\"}},[_vm._v(\"Restaurants\")]),_vm._v(\" |\\n  \"),_c('router-link',{attrs:{\"to\":\"/admin/categories\"}},[_vm._v(\"Categories\")]),_vm._v(\" |\\n  \"),_c('router-link',{attrs:{\"to\":\"/admin/users\"}},[_vm._v(\"Users\")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./AdminNav.vue?vue&type=template&id=041d36b1&\"\nvar script = {}\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import { apiHelper } from '@/utils/helpers'\r\n\r\nexport default {\r\n  restaurants: {\r\n    get() {\r\n      return apiHelper.get('/admin/restaurants')\r\n    },\r\n    create({ formData }) {\r\n      return apiHelper.post('/admin/restaurants', formData)\r\n    },\r\n    delete({ restaurantId }) {\r\n      return apiHelper.delete(`/admin/restaurants/${restaurantId}`)\r\n    },\r\n    getDetail({ restaurantId }) {\r\n      return apiHelper.get(`/admin/restaurants/${restaurantId}`)\r\n    },\r\n    update({ restaurantId, formData }) {\r\n      return apiHelper.put(`/admin/restaurants/${restaurantId}`, formData)\r\n    }\r\n  },\r\n  categories: {\r\n    get() {\r\n      return apiHelper.get('/admin/categories')\r\n    },\r\n    create({ name }) {\r\n      return apiHelper.post('/admin/categories', { name })\r\n    },\r\n    update({ categoryId, name }) {\r\n      return apiHelper.put(`/admin/categories/${categoryId}`, { name })\r\n    },\r\n    delete({ categoryId }) {\r\n      return apiHelper.delete(`/admin/categories/${categoryId}`)\r\n    }\r\n  },\r\n  users: {\r\n    get() {\r\n      return apiHelper.get('/admin/users')\r\n    },\r\n    update({ userId, isAdmin }) {\r\n      return apiHelper.put(`/admin/users/${userId}`, { isAdmin })\r\n    }\r\n  }\r\n}\r\n"],"sourceRoot":""}